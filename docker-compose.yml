version: "3"
services:
  valheim:
    image: lloesche/valheim-server:latest
    ports:
      - 2456:2456/udp
      - 2457:2457/udp
      - 2458:2458/udp
      - 3000:3000/tcp
      - 9001:9001/tcp
    environment:
      - SUPERVISOR_HTTP=true
      - BEPINEX=true
      - SUPERVISOR_HTTP_PASS=thelocaljw_admin
      - PORT=2456
      - SERVER_PORT=2456
      - SERVER_NAME=Super Earth
      - SERVER_ARGS=-crossplay -logfile=./logs
      - WORLD_NAME=SuperEarth
      - SERVER_PASS=thelocaljw
      - RESTART_IF_IDLE=true
      - SERVER_PUBLIC=false
      - UPDATE_IF_IDLE=true
      - AUTO_UPDATE_SCHEDULE=0 1 * * *
      - BACKUPS=true
    volumes:
      - .:/config
      - ./logs:/logs